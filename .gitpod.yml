ports:
  - name: Zot registry
    description: Test OCI registry
    port: 5000
    visibility: public
tasks:
  - name: Install Tools
    command: |
      brew tap anchore/grype
      brew install grype trivy bash-completion@2
  - name: Launch Zot
    command: |
      brew install oras
      docker run -d -p 5000:5000 --name oras-quickstart ghcr.io/project-zot/zot-linux-amd64:latest
  - name: Display Help
    command: |
      gp ports await 5000 

      url="$(gp url 5000)"
      export BOMCTL_PORT_URL="${url#*://}"

      git clone https://github.com/bomctl/bomctl
      cd bomctl 
      make build-linux-amd
      cp dist/bomctl-linux-amd64 /workspace/bomctl-playground
      cd /workspace/bomctl-playground
      source <(./bomctl-linux-amd64 completion bash)

      gp open README.md

      ./bomctl-linux-amd64 -h