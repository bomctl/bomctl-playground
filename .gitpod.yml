additionalRepositories:
    - url: https://github.com/bomctl/bomctl
ports:
  - name: Zot registry
    description: Test OCI registry
    port: 5000
    visibility: public
tasks:
  - name: Install Tools
    command: |
      brew tap anchore/grype
      brew install grype trivy bash-completion@2
  - name: Launch Zot
    command: |
      brew install oras
      docker run -d -p 5000:5000 --name oras-quickstart ghcr.io/project-zot/zot-linux-amd64:latest
  - name: Display Help
    command: |
      cd bomctl 
      task build:linux:amd
      cp dist/linux-amd64/bomctl .
      cd ..
      source <(./bomctl completion bash)

      gp ports await 5000 

      url="$(gp url 5000)"
      export BOMCTL_PORT_URL="${url#*://}"

      gp open README.md

      ./bomctl -h